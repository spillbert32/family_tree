if (sp.length === 2) {
  const [a, b] = sp;
  el
    .append("circle")
    .attr("class", a.gender === "male" ? "male" : "female")
    .attr("r", circleRadius)
    .attr("cx", -spouseSpacing / 2);
  el
    .append("circle")
    .attr("class", b.gender === "male" ? "male" : "female")
    .attr("r", circleRadius)
    .attr("cx", spouseSpacing / 2);

  el
    .append("text")
    .attr("class", "surname")
    .attr("y", -circleRadius - 14)
    .attr("text-anchor", "middle")
    .text(surnameDisplay(a));

  // Девичья фамилия у женщины a под кружком, если есть
  if (a.gender === "female" && a.maidenSurname && a.maidenSurname !== a.surname) {
    el
      .append("text")
      .attr("x", -spouseSpacing / 2)
      .attr("y", circleRadius + 6)
      .attr("text-anchor", "middle")
      .attr("font-style", "italic")
      .attr("font-size", 10)
      .text(`(дев. ${a.maidenSurname})`);
  }

  // Имя и отчество у a — 2 строки
  el
    .append("text")
    .attr("x", -spouseSpacing / 2)
    .attr("y", circleRadius + 20)
    .attr("text-anchor", "middle")
    .text(a.name);
  if (a.patronymic) {
    el
      .append("text")
      .attr("x", -spouseSpacing / 2)
      .attr("y", circleRadius + 34)
      .attr("text-anchor", "middle")
      .text(a.patronymic);
  }

  el
    .append("text")
    .attr("class", "surname")
    .attr("y", -circleRadius - 14)
    .attr("x", spouseSpacing / 2)
    .attr("text-anchor", "middle")
    .text(surnameDisplay(b));

  // Девичья фамилия у женщины b под кружком, если есть
  if (b.gender === "female" && b.maidenSurname && b.maidenSurname !== b.surname) {
    el
      .append("text")
      .attr("x", spouseSpacing / 2)
      .attr("y", circleRadius + 6)
      .attr("text-anchor", "middle")
      .attr("font-style", "italic")
      .attr("font-size", 10)
      .text(`(дев. ${b.maidenSurname})`);
  }

  // Имя и отчество у b — 2 строки
  el
    .append("text")
    .attr("x", spouseSpacing / 2)
    .attr("y", circleRadius + 20)
    .attr("text-anchor", "middle")
    .text(b.name);
  if (b.patronymic) {
    el
      .append("text")
      .attr("x", spouseSpacing / 2)
      .attr("y", circleRadius + 34)
      .attr("text-anchor", "middle")
      .text(b.patronymic);
  }
} else {
  const a = sp[0];
  el
    .append("circle")
    .attr("class", a.gender === "male" ? "male" : "female")
    .attr("r", circleRadius);
  el
    .append("text")
    .attr("class", "surname")
    .attr("y", -circleRadius - 14)
    .attr("text-anchor", "middle")
    .text(surnameDisplay(a));

  // Девичья фамилия у женщины a под кружком, если есть
  if (a.gender === "female" && a.maidenSurname && a.maidenSurname !== a.surname) {
    el
      .append("text")
      .attr("x", 0)
      .attr("y", circleRadius + 6)
      .attr("text-anchor", "middle")
      .attr("font-style", "italic")
      .attr("font-size", 10)
      .text(`(дев. ${a.maidenSurname})`);
  }

  // Имя и отчество на 2 строки
  el
    .append("text")
    .attr("x", 0)
    .attr("y", circleRadius + 20)
    .attr("text-anchor", "middle")
    .text(a.name);
  if (a.patronymic) {
    el
      .append("text")
      .attr("x", 0)
      .attr("y", circleRadius + 34)
      .attr("text-anchor", "middle")
      .text(a.patronymic);
  }
}
